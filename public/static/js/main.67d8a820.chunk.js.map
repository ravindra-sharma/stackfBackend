{"version":3,"sources":["login/Login.jsx","App.js","index.js"],"names":["Login","props","useState","email","setEmail","password","setPassword","className","FormGroup","controlId","bsSize","FormControl","autoFocus","type","value","onChange","e","target","Button","onClick","login","axios","interceptors","request","use","config","token","localStorage","getItem","headers","authorization","error","Promise","reject","App","fetchError","shares","setShares","userShares","setUserShares","isLoggedIn","loggedIn","setLoggedIn","useEffect","console","log","socket","socketIOClient","query","on","data","JSON","parse","username","a","post","setItem","id","map","share","i","listed_id","initialTotalPrice","toFixed","currentTotalPrice","listed_name","baseSharePrice","hint","disabled","alert","style","color","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"2SAKe,SAASA,EAAMC,GAAQ,IAAD,EACTC,mBAAS,IADA,mBAC5BC,EAD4B,KACrBC,EADqB,OAEHF,mBAAS,IAFN,mBAE5BG,EAF4B,KAElBC,EAFkB,KAQnC,OACE,yBAAKC,UAAU,SACb,8BACE,kBAACC,EAAA,EAAD,CAAWC,UAAU,QAAQC,OAAO,SAClC,oCACA,kBAACC,EAAA,EAAD,CACEC,WAAS,EACTC,KAAK,QACLC,MAAOX,EACPY,SAAU,SAAAC,GAAC,OAAIZ,EAASY,EAAEC,OAAOH,WAGrC,kBAACN,EAAA,EAAD,CAAWC,UAAU,WAAWC,OAAO,SACrC,uCACA,kBAACC,EAAA,EAAD,CACEG,MAAOT,EACPU,SAAU,SAAAC,GAAC,OAAIV,EAAYU,EAAEC,OAAOH,QACpCD,KAAK,cAGT,kBAACK,EAAA,EAAD,CAAQC,QAAS,kBAAIlB,EAAMmB,MAAMjB,EAAOE,KAAxC,WC3BRgB,IAAMC,aAAaC,QAAQC,KACzB,SAAAC,GACE,IAAMC,EAAQC,aAAaC,QAAQ,SAEnC,OADAH,EAAOI,QAAQC,cAAf,iBAAyCJ,GAClCD,KAET,SAAAM,GACE,OAAOC,QAAQC,OAAOF,MAiGXG,MA7Ff,WAAgB,IAAD,EACuBhC,mBAAS,MADhC,mBACNiC,EADM,aAEejC,mBAAS,KAFxB,mBAENkC,EAFM,KAEEC,EAFF,OAGuBnC,mBAAS,IAHhC,mBAGNoC,EAHM,KAGMC,EAHN,KAIPC,EAAab,aAAaC,QAAQ,SAJ3B,EAKmB1B,mBAASsC,GAL5B,mBAKNC,EALM,KAKIC,EALJ,KAMbC,qBAAU,WAEV,GADEC,QAAQC,IAAI,iBACXL,EAAW,CACZI,QAAQC,IAAIJ,EAAU,mBACtB,IAAMK,EAASC,IAAe,IAAK,CACjCC,MAAO,CAACtB,MAAOe,KAEjBK,EAAOG,GAAG,cAAc,SAAAC,GACtBb,EAAUc,KAAKC,MAAMF,OAEvBJ,EAAOG,GAAG,cAAc,SAAAC,GACtBX,EAAcY,KAAKC,MAAMF,UAEzB,CAACT,IAEL,IAAMrB,EAAK,uCAAG,WAAOiC,EAAUhD,GAAjB,iBAAAiD,EAAA,sEACWjC,IAAMkC,KAAN,sBAAkC,CAACF,WAAShD,aADvD,gBACJ6C,EADI,EACJA,KACRvB,aAAa6B,QAAQ,QAASN,EAAKxB,OACnCgB,EAAYQ,EAAKxB,OAHL,2CAAH,wDAOX,OACE,oCACEe,EACA,iCACE,2BAAOgB,GAAG,UAChB,4BACE,uCACA,4CACA,6CACA,4CAEDnB,EAAWoB,KAAI,SAACC,EAAOC,GAAR,OACN,4BACE,4BACGD,EAAME,WAET,4BACGF,EAAMG,kBAAkBC,QAAQ,IAEnC,4BACGJ,EAAMK,kBAAkBD,QAAQ,IAEnC,6BACIJ,EAAMG,kBAAkBC,QAAQ,GAAKJ,EAAMK,kBAAkBD,QAAQ,IAAIA,QAAQ,SAKjG,2BAAON,GAAG,UACV,4BACE,uCACA,4CACA,6CACA,4CAEDrB,EAAOsB,KAAI,SAACC,EAAOC,GAAR,OACF,4BACE,4BACGD,EAAME,WAET,4BACGF,EAAMM,aAET,4BACGN,EAAMO,eAAeH,QAAQ,IAEhC,4BACA,6BACE,2BAAQI,KAAK,mCAAmCC,UAAQ,IACxD,4BAAQjD,QAAS,WACfkD,MAAM,gDADR,eAQPlC,GACC,uBAAGmC,MAAO,CAAEC,MAAO,QAAUpC,IAxDrB,kBAAC,EAAD,CAAOf,MAAOA,MC1ChCoD,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,U","file":"static/js/main.67d8a820.chunk.js","sourcesContent":["import React, { useState } from \"react\";\nimport { FormGroup, FormControl, ControlLabel } from \"react-bootstrap\";\nimport Button from 'react-bootstrap/Button';\nimport \"./Login.css\";\n\nexport default function Login(props) {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  function validateForm() {\n    return email.length > 0 && password.length > 0;\n  }\n\n  return (\n    <div className=\"Login\">\n      <form>\n        <FormGroup controlId=\"email\" bsSize=\"large\">\n          <p>Email</p>\n          <FormControl\n            autoFocus\n            type=\"email\"\n            value={email}\n            onChange={e => setEmail(e.target.value)}\n          />\n        </FormGroup>\n        <FormGroup controlId=\"password\" bsSize=\"large\">\n          <p>Password</p>\n          <FormControl\n            value={password}\n            onChange={e => setPassword(e.target.value)}\n            type=\"password\"\n          />\n        </FormGroup>\n        <Button onClick={()=>props.login(email, password)}>\n          Login\n        </Button>\n      </form>\n    </div>\n  );\n}","import React, {useState, useEffect} from 'react';\nimport './App.css';\nimport axios from \"axios\";\nimport socketIOClient from \"socket.io-client\";\nimport Login from './login/Login';\n\naxios.interceptors.request.use(\n  config => {\n    const token = localStorage.getItem('token');\n    config.headers.authorization = `Bearer ${token}`;\n    return config;\n  },\n  error => {\n    return Promise.reject(error);\n  }\n);\n\nfunction App() {\n  const [fetchError, setFetchError] = useState(null);\n  const [shares, setShares] = useState([]);\n  const [userShares, setUserShares] = useState([]);\n  const isLoggedIn = localStorage.getItem(\"token\");\n  const [loggedIn, setLoggedIn] = useState(isLoggedIn);\n  useEffect(() => {\n    console.log(\"In use effect\");\n  if(isLoggedIn){\n    console.log(loggedIn, \"In if condition\")\n    const socket = socketIOClient('/', {\n      query: {token: loggedIn}\n    });\n    socket.on(\"share-live\", data => {\n      setShares(JSON.parse(data));\n    });\n    socket.on(\"user-share\", data => {\n      setUserShares(JSON.parse(data));\n    });\n  }}, [loggedIn]);\n  \n  const login = async (username, password) => {\n    const { data } = await axios.post(`/users/authenticate`, {username,password});\n    localStorage.setItem('token', data.token);\n    setLoggedIn(data.token);\n  };\n/*[{\"_id\":\"5f0b37fae7179a221ee3f397\",\"listed_id\":\"FCB\",\"user_id\":\"5f09dc44e7179a221ee3d929\",\"no_of_shares\":560,\"buy_price\":111,\"currentTotalPrice\":62288.518813324794,\"initialTotalPrice\":62160},\n{\"_id\":\"5f0a1a12e7179a221ee3ddfe\",\"listed_id\":\"APLH\",\"user_id\":\"5f09dc44e7179a221ee3d929\",\"no_of_shares\":80,\"buy_price\":148,\"currentTotalPrice\":10916.168183315327,\"initialTotalPrice\":11840}]*/ \n  return (\n    <>\n    {!loggedIn ? (<Login login={login}/>) : (\n      <section>\n        <table id=\"shares\">\n  <tr>\n    <th>Company</th>\n    <th>Bought Value</th>\n    <th>Current Value</th>\n    <th>Profit/Loss</th>\n  </tr>\n  {userShares.map((share, i) => (\n            <tr>\n              <td>\n                {share.listed_id}\n              </td>\n              <td>\n                {share.initialTotalPrice.toFixed(2)}\n              </td>\n              <td>\n                {share.currentTotalPrice.toFixed(2)}\n              </td>\n              <td>\n                {(share.initialTotalPrice.toFixed(2) - share.currentTotalPrice.toFixed(2)).toFixed(2)}\n              </td>\n            </tr>\n          ))}\n  </table>\n  <table id=\"shares\">\n  <tr>\n    <th>Company</th>\n    <th>Bought Value</th>\n    <th>Current Value</th>\n    <th>Profit/Loss</th>\n  </tr>\n  {shares.map((share, i) => (\n            <tr>\n              <td>\n                {share.listed_id}\n              </td>\n              <td>\n                {share.listed_name}\n              </td>\n              <td>\n                {share.baseSharePrice.toFixed(2)}\n              </td>\n              <td>\n              <div>\n                < input hint=\"How many shares you want to buy.\" disabled/>\n                <button onClick={()=>{\n                  alert(\"Functionality was not asked in assignment.\")\n                }}> Buy</button>\n              </div>\n              </td>\n            </tr>\n          ))}\n  </table>\n        {fetchError && (\n          <p style={{ color: 'red' }}>{fetchError}</p>\n        )}\n      </section>) }\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}